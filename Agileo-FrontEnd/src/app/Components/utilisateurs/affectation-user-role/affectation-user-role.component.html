<div class="modal-dialog modal-lg" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title text-success">Affectation des rôles à l'utilisateur</h5>
      <button #roleModal type="button" class="close text-success" data-dismiss="modal" aria-label="Fermer" #closebutton>
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="container my-4">


        <div class="row">
          <!-- Tableau de gauche - Rôles disponibles -->
          <div class="col-md-6">
            <h5 class="text-center">Rôles disponibles</h5>
            <div class="table-responsive small-table">
              <table class="table table-striped mb-0 text-nowrap">
                <thead>
                <tr>
                  <th style="width: 30px;"></th>
                  <th style="width: 50px;">ID</th>
                  <th>Nom</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let role of listRole; trackBy: trackByRoleId">
                  <td>
                    <input type="checkbox" [(ngModel)]="role.selected" [id]="'available-role-' + role.id">
                  </td>
                  <td>{{role.id}}</td>
                  <td>
                    {{role.name}}
                    <span *ngIf="role.toBeDeleted" class="badge bg-danger ms-2">À supprimer</span>
                  </td>
                </tr>
                <tr *ngIf="listRole.length === 0">
                  <td colspan="4" class="text-center text-muted">Aucun rôle disponible</td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Flèches de contrôle -->
          <div class="col-md-1 d-flex flex-column justify-content-center align-items-center arrows-container">
            <button (click)="attribuerRole()"
                    style="width: 40px; height: 40px"
                    class="btn btn-primary mb-3 d-flex align-items-center justify-content-center"
                    title="Attribuer les rôles sélectionnés"
                    [disabled]="!hasSelectedAvailableRoles()">
              <i class="fa fa-arrow-right" style="font-size: 16px;" aria-hidden="true"></i>
            </button>
            <button (click)="retirerRole()"
                    style="width: 40px; height: 40px"
                    class="btn btn-secondary d-flex align-items-center justify-content-center"
                    title="Retirer les rôles sélectionnés"
                    [disabled]="!hasSelectedAssignedRoles()">
              <i class="fa fa-arrow-left" style="font-size: 16px;" aria-hidden="true"></i>
            </button>
          </div>

          <!-- Tableau de droite - Rôles attribués -->
          <div class="col-md-5">
            <h5 class="text-center">Rôles attribués</h5>
            <div class="table-responsive small-table">
              <table class="table table-striped mb-0 text-nowrap">
                <thead>
                <tr>
                  <th style="width: 30px;"></th>
                  <th style="width: 50px;">ID</th>
                  <th>Nom</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let roleAttribue of listUserRole; trackBy: trackByRoleId"
                    [class.table-warning]="roleAttribue.toBeDeleted"
                    [class.table-success]="!roleAttribue.fromDatabase && !roleAttribue.toBeDeleted">
                  <td>
                    <input type="checkbox"
                           [(ngModel)]="roleAttribue.selected"
                           [id]="'assigned-role-' + roleAttribue.id"
                           [disabled]="!!roleAttribue.toBeDeleted">
                  </td>
                  <td>{{roleAttribue.id}}</td>
                  <td>
                    {{roleAttribue.name}}
                    <span *ngIf="!roleAttribue.fromDatabase && !roleAttribue.toBeDeleted"
                          class="badge bg-success ms-2">Nouveau</span>
                    <span *ngIf="roleAttribue.toBeDeleted"
                          class="badge bg-danger ms-2">À supprimer</span>
                  </td>
                </tr>
                <tr *ngIf="listUserRole.length === 0">
                  <td colspan="4" class="text-center text-muted">Aucun rôle attribué</td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="submit"
              class="btn btn-success"
              (click)="OnValideAffectation()"
              [disabled]="!hasChangesToSave()">
        Valider
      </button>
      <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
    </div>
  </div>
</div>
